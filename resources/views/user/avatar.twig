{% extends "layouts/base.twig" %}

{% block title %} Editar Perfil {% endblock %}

{% block content %}
<section class="articles">
  <div class="column is-8 is-offset-2">
    <div class="card article">
      <div class="card-content">
        <form action="" method="POST" enctype="multipart/form-data">
          <div class="field">
            <figure class="image is-128x128 image container">
              <img id="thumbnail" class="is-rounded" src="{{ base_url() }}/uploads/{{ auth.user.avatar }}" alt="image-preview-here" />
            </figure>
            <p style="margin-top: 20px" class="label has-text-centered">Olá {{ auth.user.name }}!</p>
            <div class="file has-name is-centered">
              <label class="file-label">
                <input class="file-input" type="file" onchange="readURL(this);" name="avatar"  accept="image/x-png,image/gif,image/jpeg">
                <span class="file-cta">
                  <span class="file-icon">
                    <i class="fas fa-upload"></i>
                  </span>
                  <span class="file-label">
                    Escolha a imagem…
                  </span>
                </span>
              </label>
            </div>
          </div>
          <div class="control has-text-centered">
            <button type="submit" class="button is-link">Enviar Avatar</button>
          </div>
        </form>
      </div>
    </div>
  </div>
</section>
{% endblock %}

{% block js %}
<script>
// change image on select in upload
function readURL(input) {
  if (input.files && input.files[0]) {
      var reader = new FileReader();
      reader.onload = function (e) {
          $('#thumbnail').attr('src', e.target.result)
      };
      reader.readAsDataURL(input.files[0]);
  }
}
</script>
{% endblock %}
